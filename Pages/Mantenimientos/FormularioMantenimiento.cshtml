@page "/Mantenimientos/FormularioMantenimiento/{handler?}/{id:int?}"
@model InventarioComputo.Pages.Mantenimientos.FormularioMantenimientoModel
@{
    ViewData["Title"] = Model.Modo == "Crear" ? "Nuevo Mantenimiento" :
                        Model.Modo == "Editar" ? "Editar Mantenimiento" : "Ver Mantenimiento";
    Layout = "_LayoutGeneral";

    bool esModoLectura = Model.Modo == "Ver";
}

<div class="container-form">
    <h1 class="beige-text"><i class="fas fa-tools"></i> @ViewData["Title"]</h1>

    <form method="post" class="form-beige">
        <input type="hidden" asp-for="Mantenimiento.IdMantenimientoEquipo" />

        <div class="form-group">
            <label asp-for="Mantenimiento.IdActivoFijo" class="form-label">Equipo</label>
            <select asp-for="Mantenimiento.IdActivoFijo" class="form-control input-beige" disabled="@esModoLectura">
                <option value="">-- Seleccione un equipo --</option>
                @foreach (var equipo in Model.Equipos)
                {
                    <option value="@equipo.Id"
                            selected="@(equipo.Id == Model.Mantenimiento?.IdActivoFijo)">
                        @equipo.EtiquetaInv - @equipo.Marca @equipo.Modelo
                    </option>
                }
            </select>
            <span asp-validation-for="Mantenimiento.IdActivoFijo" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.Fecha" class="form-label"></label>
            <input asp-for="Mantenimiento.Fecha" type="datetime-local"
                   class="form-control" readonly="@esModoLectura">
            <span asp-validation-for="Mantenimiento.Fecha" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.IdTipoMantenimiento" class="form-label">Tipo de Mantenimiento</label>
            <select asp-for="Mantenimiento.IdTipoMantenimiento" class="form-control input-beige" disabled="@esModoLectura">
                <option value="">-- Seleccione un tipo --</option>
                @foreach (var tipo in Model.TiposMantenimiento)
                {
                    <option value="@tipo.Id"
                            selected="@(tipo.Id == Model.Mantenimiento?.IdTipoMantenimiento)">
                        @tipo.Nombre
                    </option>
                }
            </select>
            <span asp-validation-for="Mantenimiento.IdTipoMantenimiento" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.Descripcion" class="form-label"></label>
            <textarea asp-for="Mantenimiento.Descripcion" class="form-control"
                      rows="3" readonly="@esModoLectura"></textarea>
            <span asp-validation-for="Mantenimiento.Descripcion" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.IdEmpleado" class="form-label">Responsable</label>
            <select asp-for="Mantenimiento.IdEmpleado" class="form-control input-beige" disabled="@esModoLectura">
                <option value="">-- Seleccione un responsable --</option>
                @foreach (var empleado in Model.Empleados)
                {
                    <option value="@empleado.Id"
                            selected="@(empleado.Id == Model.Mantenimiento?.IdEmpleado)">
                        @empleado.Nombre
                    </option>
                }
            </select>
            <span asp-validation-for="Mantenimiento.IdEmpleado" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.Costo" class="form-label"></label>
            <input asp-for="Mantenimiento.Costo" type="number" step="0.01"
                   class="form-control" readonly="@esModoLectura">
            <span asp-validation-for="Mantenimiento.Costo" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Mantenimiento.Observaciones" class="form-label"></label>
            <textarea asp-for="Mantenimiento.Observaciones" class="form-control"
                      rows="2" readonly="@esModoLectura"></textarea>
            <span asp-validation-for="Mantenimiento.Observaciones" class="text-danger"></span>
        </div>

        @if (!esModoLectura)
        {
            <div class="form-actions">
                <button type="submit" class="btn btn-beige">Guardar</button>
                <a href="/Mantenimiento/Lista" class="btn btn-cancelar">Cancelar</a>
            </div>
        }
        else
        {
            <div class="form-actions">
                <a href="/Mantenimiento/Editar/@Model.Mantenimiento.IdMantenimientoEquipo" class="btn btn-beige">Editar</a>
                <a href="/Mantenimiento/Lista" class="btn btn-cancelar">Volver</a>
            </div>
        }
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}